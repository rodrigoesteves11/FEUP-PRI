--create container 

sudo docker run -p 8983:8983 --name meic_solrr -v /home/n00n/Desktop/MEIC/pri/MEIC-PRI/data -d solr:9 solr-precreate courses



--delete core

sudo docker exec meic_solrr bin/solr delete -c courses



-- change schema

curl -X POST -H 'Content-type:application/json' --data-binary "@meic_courses.json" http://localhost:8983/solr/courses/schema


-- create core

sudo docker exec meic_solr bin/solr create_core -c courses

-- input document

curl -X POST -H 'Content-type:application/json' --data-binary "@meic_courses.json" http://localhost:8983/solr/courses/update?commit=true


-- delete content in species

curl -X POST -H 'Content-Type: application/json' --data-binary '{"delete": {"query": "*:*"}}' http://localhost:8983/solr/speciesV0/update?commit=true


-- Add Species data

curl -X POST -H 'Content-type:application/json' --data-binary "@transformed_species_data.json" http://localhost:8983/solr/speciesV0/update?commit=true

-- Submit query and convert results to TREC format

./../scripts/query_solr.py --query query.json --uri http://localhost:8983/solr --collection species | ./../scripts/solr2trec.py > results_trec.txt

(In case permission denied for both files): chmod +x ./../scripts/FILE.py

-- Convert qrels into TREC format and then manually judge the relevance (0 for non-relevant, 1 for relevant)

cat qrels.txt | ./scripts/qrels2trec.py > qrels_trec.txt

-- Evaluate results

./trec_eval/trec_eval qrels_trec.txt results_trec.txt

-- Generate Precision-Recall curve

cat results_trec.txt | ./scripts/plot_pr.py --qrels qrels_trec.txt --output prec_rec.png


